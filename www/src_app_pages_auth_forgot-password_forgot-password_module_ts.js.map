{"version":3,"file":"src_app_pages_auth_forgot-password_forgot-password_module_ts.js","mappings":"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","sources":["./src/app/pages/auth/forgot-password/forgot-password-routing.module.ts","./src/app/pages/auth/forgot-password/forgot-password.module.ts","./src/app/pages/auth/forgot-password/forgot-password.page.ts","./src/app/pages/auth/forgot-password/forgot-password.page.scss"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ForgotPasswordPage } from './forgot-password.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ForgotPasswordPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ForgotPasswordPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ForgotPasswordPageRoutingModule } from './forgot-password-routing.module';\n\nimport { ForgotPasswordPage } from './forgot-password.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ForgotPasswordPageRoutingModule,\n    TranslateModule,\n    ReactiveFormsModule\n  ],\n  declarations: [ForgotPasswordPage]\n})\nexport class ForgotPasswordPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { UiService } from 'src/app/services/ui.service';\nimport { UserService } from '../../../services/user.service';\nimport { Router } from '@angular/router';\nimport { constants } from 'src/environments/constants';\n\n@Component({\n  selector: 'app-forgot-password',\n  templateUrl: './forgot-password.page.html',\n  styleUrls: ['./forgot-password.page.scss'],\n})\nexport class ForgotPasswordPage implements OnInit {\n\n  public passwordForm = this.formBuilder.group( {\n    email: ['', [\n      Validators.required,\n      Validators.pattern('^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$')\n    ]]\n  });\n\n  public validation_messages = {\n    'email': [\n       { type: 'required', message: 'msgErrReqEmail' },\n       { type: 'pattern', message: 'msgErrPattEmail' }\n     ]\n   };\n   private lang = \"\";\n  \n  constructor(private translate: TranslateService,\n    private formBuilder: FormBuilder,\n    private uiService: UiService,\n    private userService: UserService,\n    private router: Router\n  ) { }\n\n  get email(){\n    return this.passwordForm.get('email');\n  }\n  \n\n  ngOnInit() {\n    if (this.translate.currentLang == 'es') {\n          this.lang = constants.languages.es;\n        } else {\n          this.lang = constants.languages.en;\n        }\n  }\n\n  async next(){\n    console.log(this.email);\n    if(this.validaCampo(this.email, this.validation_messages.email)){\n      return;\n    }\n    let res = await this.userService.resetPasssword(this.email.value, this.lang);\n\n    if(res === 500){\n      this.uiService.alertOK(this.translate.instant(\"REC_PASS.resetPasswordError\"));\n      return;\n    } else if(res === 421){\n      this.uiService.alertOK_CANCEL(this.translate.instant(\"REC_PASS.emailNotFound\"));\n      return;\n    }\n    await this.uiService.alertOK_CANCEL(this.translate.instant(\"REC_PASS.resetPassword\"));\n    this.router.navigate(['login']);\n  }\n\n  validaCampo(campo:any, message: any): boolean {\n    for (let validation of message) {\n      if(campo.hasError(validation.type)) {\n        this.uiService.alertOK(this.translate.instant('LOGIN.'+validation.message));\n        return true;\n      }\n    }\n    return false;\n  }\n\n}\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `ion-content {\n  --padding-top: 15%;\n  --padding-start: 5%;\n  --padding-end: 5%;\n  --padding-bottom: 5%;\n}\n\nh1 {\n  font-family: \"Sk-Modernist-Bold\";\n  font-size: 30px;\n  margin-top: 0px;\n  margin-bottom: -10px;\n  text-align: center;\n}\n\n.camposLabel-CItem {\n  font-family: \"Sk-Modernist-Regular\";\n  font-size: 16px;\n}\n.camposLabel-CItem.label-floating {\n  font-family: \"Sk-Modernist-Regular\";\n  font-size: 17px;\n  color: var(--ion-color-negro) !important;\n  max-width: -moz-fit-content !important;\n  max-width: fit-content !important;\n  margin-top: -6px;\n}\n\n.next-Bt {\n  display: block;\n  font-family: \"Sk-Modernist-Bold\";\n  font-size: 15px;\n  text-transform: none;\n  width: 100%;\n  height: 40px;\n  --border-radius: 10px;\n  --box-shadow:none;\n  margin-top: 20px;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/pages/auth/forgot-password/forgot-password.page.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAA;EACA,mBAAA;EACA,iBAAA;EACA,oBAAA;AACJ;;AAEA;EACI,gCAAA;EACA,eAAA;EACA,eAAA;EACA,oBAAA;EACA,kBAAA;AACJ;;AAEA;EACI,mCAAA;EACA,eAAA;AACJ;AACI;EACI,mCAAA;EACA,eAAA;EACA,wCAAA;EACA,sCAAA;EAAA,iCAAA;EACA,gBAAA;AACR;;AAGA;EACI,cAAA;EACA,gCAAA;EACA,eAAA;EACA,oBAAA;EACA,WAAA;EACA,YAAA;EACA,qBAAA;EACA,iBAAA;EACA,gBAAA;AAAJ\",\"sourcesContent\":[\"ion-content {\\n    --padding-top: 15%;\\n    --padding-start: 5%;\\n    --padding-end: 5%;\\n    --padding-bottom: 5%;\\n}\\n\\nh1 {\\n    font-family: 'Sk-Modernist-Bold';\\n    font-size: 30px;\\n    margin-top: 0px;\\n    margin-bottom: -10px;\\n    text-align: center;\\n}\\n\\n.camposLabel-CItem {\\n    font-family: 'Sk-Modernist-Regular';\\n    font-size: 16px;\\n    \\n    &.label-floating {\\n        font-family: 'Sk-Modernist-Regular';\\n        font-size: 17px;\\n        color: var(--ion-color-negro) !important;\\n        max-width: fit-content !important;\\n        margin-top: -6px;\\n    }\\n}\\n\\n.next-Bt {\\n    display: block;\\n    font-family: 'Sk-Modernist-Bold';\\n    font-size: 15px;\\n    text-transform: none;\\n    width: 100%;\\n    height: 40px;\\n    --border-radius: 10px;\\n    --box-shadow:none;\\n    margin-top: 20px;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n"],"names":["NgModule","RouterModule","ForgotPasswordPage","routes","path","component","ForgotPasswordPageRoutingModule","__decorate","imports","forChild","exports","CommonModule","FormsModule","ReactiveFormsModule","IonicModule","TranslateModule","ForgotPasswordPageModule","declarations","Component","FormBuilder","Validators","TranslateService","UiService","UserService","Router","constants","constructor","translate","formBuilder","uiService","userService","router","passwordForm","group","email","required","pattern","validation_messages","type","message","lang","get","ngOnInit","currentLang","languages","es","en","next","_this","_asyncToGenerator","console","log","validaCampo","res","resetPasssword","value","alertOK","instant","alertOK_CANCEL","navigate","campo","validation","hasError","selector","template","__NG_CLI_RESOURCE__0"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}