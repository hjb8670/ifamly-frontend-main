{"version":3,"file":"src_app_pages_auth_notification-prompt_notification-prompt_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AAEa;AAEpE,MAAMG,MAAM,GAAW,CACrB;EACEC,IAAI,EAAE,EAAE;EACRC,SAAS,EAAEH,6EAAsBA;CAClC,CACF;AAMM,IAAMI,mCAAmC,GAAzC,MAAMA,mCAAmC,GAAG;AAAtCA,mCAAmC,GAAAC,iDAAA,EAJ/CP,uDAAQ,CAAC;EACRQ,OAAO,EAAE,CAACP,yDAAY,CAACQ,QAAQ,CAACN,MAAM,CAAC,CAAC;EACxCO,OAAO,EAAE,CAACT,yDAAY;CACvB,CAAC,GACWK,mCAAmC,CAAG;;;;;;;;;;;;;;;;;;;;;;;;AChBV;AACM;AACF;AACA;AAG8C;AACvB;AAW7D,IAAMQ,4BAA4B,GAAlC,MAAMA,4BAA4B,GAAG;AAA/BA,4BAA4B,GAAAP,iDAAA,EATxCP,uDAAQ,CAAC;EACRQ,OAAO,EAAE,CACPG,yDAAY,EACZC,uDAAW,EACXC,uDAAW,EACXP,oGAAmC,CACpC;EACDS,YAAY,EAAE,CAACb,6EAAsB;CACtC,CAAC,GACWY,4BAA4B,CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBM;AACT;AACmC;AAChB;AAOrD,IAAMZ,sBAAsB,GAA5B,MAAMA,sBAAsB;EAEjCmB,YACcC,WAAwB,EACxBC,MAAc,EACdC,IAAY,EACZC,mBAAwC;IAHxC,KAAAH,WAAW,GAAXA,WAAW;IACX,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,IAAI,GAAJA,IAAI;IACJ,KAAAC,mBAAmB,GAAnBA,mBAAmB;EAC9B;EAEGC,kBAAkBA,CAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,sJAAA;MACtB,IAAI;QACF,MAAMC,KAAK,SAASF,KAAI,CAACF,mBAAmB,CAACK,iBAAiB,EAAE;QAChEC,OAAO,CAACC,GAAG,CAACH,KAAK,CAAC;QAClBF,KAAI,CAACL,WAAW,CAACW,uBAAuB,CAAC,IAAI,CAAC;QAC9CN,KAAI,CAACF,mBAAmB,CAACS,gBAAgB,EAAE,CAAC,CAAC;QAC7C,MAAMP,KAAI,CAACL,WAAW,CAACa,eAAe,CAACN,KAAK,CAAC;QAE7C;QACAF,KAAI,CAACH,IAAI,CAACY,GAAG,CAAC,MAAK;UACjBT,KAAI,CAACJ,MAAM,CAACc,QAAQ,CAAC,CAAC,qBAAqB,CAAC,CAAC;QAC/C,CAAC,CAAC;MACJ,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZP,OAAO,CAACQ,KAAK,CAAC,2CAA2C,EAAED,GAAG,CAAC;QAC/DX,KAAI,CAACL,WAAW,CAACW,uBAAuB,CAAC,KAAK,CAAC;QAE/CN,KAAI,CAACH,IAAI,CAACY,GAAG,CAAC,MAAK;UACjBT,KAAI,CAACJ,MAAM,CAACc,QAAQ,CAAC,CAAC,qBAAqB,CAAC,CAAC;QAC/C,CAAC,CAAC;MACJ;IAAC;EACH;EAGAG,IAAIA,CAAA;IACF,IAAI,CAAClB,WAAW,CAACW,uBAAuB,CAAC,KAAK,CAAC;IAC/C,IAAI,CAACV,MAAM,CAACc,QAAQ,CAAC,CAAC,qBAAqB,CAAC,CAAC;EAC/C;;;;;;;;;;;;;AAnCWnC,sBAAsB,GAAAK,iDAAA,EALlCS,wDAAS,CAAC;EACTyB,QAAQ,EAAE,yBAAyB;EACnCC,QAAA,EAAAC,sEAA8C;;CAE/C,CAAC,GACWzC,sBAAsB,CAoClC;;;;;;;;;;;AC9CD;AACA,4CAA4C,mBAAO,CAAC,8EAAmE;AACvH,kCAAkC,mBAAO,CAAC,uEAA4D;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,OAAO,+PAA+P,UAAU,WAAW,WAAW,KAAK,KAAK,WAAW,UAAU,WAAW,UAAU,KAAK,KAAK,UAAU,KAAK,KAAK,WAAW,UAAU,WAAW,UAAU,KAAK,KAAK,UAAU,UAAU,WAAW,KAAK,KAAK,WAAW,UAAU,WAAW,WAAW,KAAK,KAAK,UAAU,WAAW,6CAA6C,kBAAkB,4BAA4B,wBAAwB,6BAA6B,yBAAyB,kBAAkB,uBAAuB,mBAAmB,KAAK,kBAAkB,mBAAmB,KAAK,cAAc,wBAAwB,sBAAsB,0BAA0B,kBAAkB,KAAK,iBAAiB,sBAAsB,kBAAkB,0BAA0B,KAAK,kBAAkB,yBAAyB,oBAAoB,0BAA0B,0BAA0B,KAAK,iBAAiB,kBAAkB,2BAA2B,KAAK,GAAG,yBAAyB,kBAAkB,4BAA4B,wBAAwB,GAAG,4CAA4C,uBAAuB,gBAAgB,qBAAqB,iBAAiB,GAAG,iCAAiC,iBAAiB,GAAG,6BAA6B,sBAAsB,oBAAoB,wBAAwB,gBAAgB,GAAG,gCAAgC,oBAAoB,gBAAgB,wBAAwB,GAAG,iCAAiC,uBAAuB,kBAAkB,wBAAwB,wBAAwB,GAAG,gCAAgC,gBAAgB,yBAAyB,GAAG,mBAAmB;AACv3D;AACA","sources":["./src/app/pages/auth/notification-prompt/notification-prompt-routing.module.ts","./src/app/pages/auth/notification-prompt/notification-prompt.module.ts","./src/app/pages/auth/notification-prompt/notification-prompt.page.ts","./src/app/pages/auth/notification-prompt/notification-prompt.page.scss"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NotificationPromptPage } from './notification-prompt.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NotificationPromptPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NotificationPromptPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\n\n\nimport { NotificationPromptPageRoutingModule } from './notification-prompt-routing.module';\nimport { NotificationPromptPage } from './notification-prompt.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    NotificationPromptPageRoutingModule\n  ],\n  declarations: [NotificationPromptPage]\n})\nexport class NotificationPromptPageModule {}\n","import { Component, NgZone } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { NotificationService } from 'src/app/services/notification.service';\nimport { UserService } from 'src/app/services/user.service';\n\n@Component({\n  selector: 'app-notification-prompt',\n  templateUrl: './notification-prompt.page.html',\n  styleUrls: ['./notification-prompt.page.scss'],\n})\nexport class NotificationPromptPage {\n\n  constructor(\n        private userService: UserService, \n        private router: Router,\n        private zone: NgZone,\n        private notificationService: NotificationService\n  ) {}\n\n  async allowNotifications() {\n    try {\n      const token = await this.notificationService.requestPermission();\n      console.log(token);\n      this.userService.setNotificationsAllowed(true);\n      this.notificationService.listenToMessages(); // Start listening\n      await this.userService.sendDeviceToken(token);\n\n      // Force navigation inside Angular zone\n      this.zone.run(() => {\n        this.router.navigate(['/main/tabs/discover']);\n      });\n    } catch (err) {\n      console.error('Notification permission denied or failed:', err);\n      this.userService.setNotificationsAllowed(false);\n  \n      this.zone.run(() => {\n        this.router.navigate(['/main/tabs/discover']);\n      });\n    }\n  }\n\n\n  skip() {\n    this.userService.setNotificationsAllowed(false);\n    this.router.navigate(['/main/tabs/discover']);\n  }\n}\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.notification-page {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.notification-page .notification-content {\n  text-align: center;\n  width: 100%;\n  max-width: 320px;\n  margin: auto;\n}\n.notification-page .bell-icon {\n  width: 200px;\n}\n.notification-page .title {\n  font-weight: bold;\n  font-size: 22px;\n  margin-bottom: 12px;\n  color: #000;\n}\n.notification-page .subtitle {\n  font-size: 15px;\n  color: #444;\n  margin-bottom: 30px;\n}\n.notification-page .allow-btn {\n  --background: #000;\n  --color: #fff;\n  border-radius: 12px;\n  margin-bottom: 12px;\n}\n.notification-page .skip-btn {\n  color: #000;\n  text-transform: none;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/pages/auth/notification-prompt/notification-prompt.page.scss\",\"webpack://./../../My%20Projects/frontend-ifamily/src/app/pages/auth/notification-prompt/notification-prompt.page.scss\"],\"names\":[],\"mappings\":\"AAAA;EACE,aAAA;EACA,uBAAA;EACA,mBAAA;ACCF;ADCE;EACE,kBAAA;EACA,WAAA;EACA,gBAAA;EACA,YAAA;ACCJ;ADEE;EACE,YAAA;ACAJ;ADGE;EACE,iBAAA;EACA,eAAA;EACA,mBAAA;EACA,WAAA;ACDJ;ADIE;EACE,eAAA;EACA,WAAA;EACA,mBAAA;ACFJ;ADKE;EACE,kBAAA;EACA,aAAA;EACA,mBAAA;EACA,mBAAA;ACHJ;ADME;EACE,WAAA;EACA,oBAAA;ACJJ\",\"sourcesContent\":[\".notification-page {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n\\n  .notification-content {\\n    text-align: center;\\n    width: 100%;\\n    max-width: 320px;\\n    margin: auto;\\n  }\\n\\n  .bell-icon {\\n    width: 200px;\\n  }\\n\\n  .title {\\n    font-weight: bold;\\n    font-size: 22px;\\n    margin-bottom: 12px;\\n    color: #000;\\n  }\\n\\n  .subtitle {\\n    font-size: 15px;\\n    color: #444;\\n    margin-bottom: 30px;\\n  }\\n\\n  .allow-btn {\\n    --background: #000;\\n    --color: #fff;\\n    border-radius: 12px;\\n    margin-bottom: 12px;\\n  }\\n\\n  .skip-btn {\\n    color: #000;\\n    text-transform: none;\\n  }\\n}\\n\",\".notification-page {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n.notification-page .notification-content {\\n  text-align: center;\\n  width: 100%;\\n  max-width: 320px;\\n  margin: auto;\\n}\\n.notification-page .bell-icon {\\n  width: 200px;\\n}\\n.notification-page .title {\\n  font-weight: bold;\\n  font-size: 22px;\\n  margin-bottom: 12px;\\n  color: #000;\\n}\\n.notification-page .subtitle {\\n  font-size: 15px;\\n  color: #444;\\n  margin-bottom: 30px;\\n}\\n.notification-page .allow-btn {\\n  --background: #000;\\n  --color: #fff;\\n  border-radius: 12px;\\n  margin-bottom: 12px;\\n}\\n.notification-page .skip-btn {\\n  color: #000;\\n  text-transform: none;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n"],"names":["NgModule","RouterModule","NotificationPromptPage","routes","path","component","NotificationPromptPageRoutingModule","__decorate","imports","forChild","exports","CommonModule","FormsModule","IonicModule","NotificationPromptPageModule","declarations","Component","NgZone","Router","NotificationService","UserService","constructor","userService","router","zone","notificationService","allowNotifications","_this","_asyncToGenerator","token","requestPermission","console","log","setNotificationsAllowed","listenToMessages","sendDeviceToken","run","navigate","err","error","skip","selector","template","__NG_CLI_RESOURCE__0"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}